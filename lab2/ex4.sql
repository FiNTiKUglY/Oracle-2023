CREATE TABLE LOGS(
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY,
    ACTION VARCHAR2(255) NOT NULL,
    TIME TIMESTAMP NOT NULL,
    STUDENT_ID NUMBER NOT NULL,
    STUDENT_NAME VARCHAR(40) NOT NULL,
    STUDENT_GROUP_ID NUMBER NOT NULL,
    PRIMARY KEY(ID)
);

CREATE OR REPLACE TRIGGER STUDENTS_LOGS_TRIGGER
AFTER INSERT OR UPDATE OR DELETE ON STUDENTS
FOR EACH ROW
BEGIN
    IF INSERTING THEN
        INSERT INTO LOGS(ACTION, TIME, STUDENT_ID, STUDENT_NAME, STUDENT_GROUP_ID)
            VALUES ('INSERT', SYSTIMESTAMP, :NEW.ID, :NEW.NAME, :NEW.GROUP_ID);
    ELSIF UPDATING THEN
        INSERT INTO LOGS(ACTION, TIME, STUDENT_ID, STUDENT_NAME, STUDENT_GROUP_ID)
            VALUES ('UPDATE', SYSTIMESTAMP, :NEW.ID, :NEW.NAME, :NEW.GROUP_ID);
    ELSIF DELETING THEN
        INSERT INTO LOGS(ACTION, TIME, STUDENT_ID, STUDENT_NAME, STUDENT_GROUP_ID)
            VALUES ('DELETE', SYSTIMESTAMP, :OLD.ID, :OLD.NAME, :OLD.GROUP_ID);
    END IF;
END;
